<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^2.0/dist/tailwind.min.css" rel="stylesheet">
    <title>Toxic Comment Classification</title>
</head>
<body>
  <!-- component -->
<div class="h-auto pb-10 w-full bg-gray-900 text-white">
  <header class="text-center mx-auto pt-10">
    <a href="#" class="p-5 hover:bg-gray-800">
      <span class="text-3xl font-semibold">Pattern Recognition and Machine Learning</span>
    </a>
  </header>

  <div class="text-center px-6 pb-5">
    <section>
      <h1 class="mt-5 text-6xl font-bold">Personality Prediction</h1>
      <p class="mt-10 text-gray-400 description">
        (MBTI) Myers-Briggs Personality Type Prediction
      </p>
    </section>
  </div>
  <header class="text-center mx-auto pt-10">
    <a href="https://www.iitj.ac.in" target="blank" class="p-5 hover:bg-gray-800">
      <span class="text-3xl font-semibold">Indian Institute of Technology Jodhpur (IITJ)</span>
    </a>
  </header>
</div>
<!-- component -->


<div class="flex mb-10 my-auto">
    <div class='mt-10 flex flex-col relative max-w-sm w-full rounded-lg overflow-hidden mx-auto' x-data="{maximum: ''}">
        <h2 class="font-bold mb-1 text-gray-700 block text-center">Enter a Texual Comment</h2>
        <form action="" method="post" enctype="multipart/form-data">
          <textarea name="comment" rows="4" maxlength="1010" x-model="maximum" x-ref="maximum"
          class="block w-full mt-1 py-2 px-3 border-solid border-2 border-red-200 rounded-md shadow-sm focus:outline-none"></textarea>
          <input type="button" value="Submit" id="submitComment" class="p-2 cursor-pointer bg-gray-800 text-white mt-2">
        </form>
        <span class="absolute px-2 py-1 text-xs text-white bg-blue-500 rounded right-2 bottom-2" x-text="$refs.maximum.getAttribute('maxlength') - maximum.length" x-cloak></span>
    </div>
</div>

<!-- component -->
<hr>
<div id="result" class="my-10 text-center mx-auto text-lg"></div>
  
<div class="container mx-auto p-3 hidden" id="main_div">
    <div class="w-full h-auto text-center py-10">
      <div class="text-5xl text-center" id="checkToxic">

      </div>
    </div>
    <hr>
    <h2 class="p-10 text-3xl font-bold text-center">Prediction | (MBTI) Myers-Briggs Personality Type Prediction</h2>
  <div class="overflow-x-auto mt-6">
    <table class="table-auto border-collapse w-full">
      <thead>
        <tr class="rounded-lg text-sm font-medium text-gray-700" style="font-size: 0.9674rem">
          <th class="px-4 py-2 bg-gray-200 text-left" style="background-color:#f8f8f8">Personality Classes</th>
          <th class="px-4 py-2 text-right" style="background-color:#f8f8f8">Class Prediction</th>
        </tr>
      </thead>
      <tbody class="text-sm font-normal text-gray-700">
        <tr class="hover:bg-gray-100 border-b border-gray-200 py-10">
          <td class="px-4 py-4 text-left">Mind: Introverted (I) or Extraverted (E)</td>
          <td class="px-4 py-4 text-right" id="score_ie">00.00</td>
        </tr>
        <tr class="hover:bg-gray-100 border-b border-gray-200 py-4">
          <td class="px-4 py-4 text-left">Energy: Sensing (S) or Intuitive (N)</td>
          <td class="px-4 py-4 text-right" id="score_ns">00.00</td>
        </tr>
        <tr class="hover:bg-gray-100 border-b border-gray-200 py-10">
          <td class="px-4 py-4 text-left">Nature: Feeling (F) or Thinking (T)</td>
          <td class="px-4 py-4 text-right" id="score_ft">00.00</td>
        </tr>
        <tr class="hover:bg-gray-100 border-b border-gray-200 py-4">
          <td class="px-4 py-4 text-left">Tactics: Perceiving (P) or Judging (J)</td>
          <td class="px-4 py-4 text-right" id="score_pj">00.00</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div id="wordcloud" class="mx-auto text-center mb-10">
    <h2 class="p-10 text-3xl font-bold text-center">Word Cloud</h2>
    <img id="wordcloudimg" src="/static/wc.jpg" class="border border-1 w-1/2 mx-auto justify-center object-cover">
  </div> 
</div>

</body>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type=text/javascript>
    $(function() {
      $('#submitComment').bind('click', function() {
        $("#main_div").hide();
        $('#result').show().text("Working...");
        $.getJSON('/predict', {
          comment: $('textarea[name="comment"]').val(),
        }, function(data) {    
          $('#score_ft').text(data.ft);
          $('#score_ie').text(data.ie);
          $('#score_ns').text(data.ns);
          $('#score_pj').text(data.pj);

          $('#result').text("Done!");
          document.getElementById("result").style.display = "none";
          var el = document.getElementById("wordcloudimg");     // Get the image element
          var timestamp = new Date().getTime();
          el.src = "/static/wc.jpg?t=" + timestamp; 
          $("#main_div").show();
        });
        return false;
      });
    });
</script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
<style>

  thead tr th:first-child { border-top-left-radius: 10px; border-bottom-left-radius: 10px;}
  thead tr th:last-child { border-top-right-radius: 10px; border-bottom-right-radius: 10px;}
  
  tbody tr td:first-child { border-top-left-radius: 5px; border-bottom-left-radius: 0px;}
  tbody tr td:last-child { border-top-right-radius: 5px; border-bottom-right-radius: 0px;}
  [x-cloak] {
        visibility: hidden;
        overflow: hidden;
        display: none;
  }
</style>
</html>